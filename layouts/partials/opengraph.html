{{- $params := .Site.Params }}
{{- if .IsHome }}
<meta name='keywords' content="{{delimit .Site.Params.Meta.Keywords ", "}}"/>
<meta property = 'og:title' content = "{{ .Site.Params.Meta.Description }}" />
{{ else }}
<meta name='keywords' content="{{delimit .Keywords ", "}}" />
<meta property = 'og:title' content = '{{ .Title }} | {{ .Site.Title }}' />
{{ end -}}
<meta property = 'og:locale' content = 'en_US' />
<meta property = 'og:type' content = 'article' />
<meta property = 'og:description' content = "{{ if .IsHome }}{{ $params.description }}{{ else }}{{ .Description }}{{ end -}}" />
<meta property = 'og:url' content = '{{ .Permalink }}' />

{{- /* .Params.image is the front matter for each page, have to get match from what is */ -}}
{{- /* essentially a `ls images/` within this page's bundle */ -}}
{{- /* First, let's check for backward compatibility refs */ -}}
{{ $image_url := "" }}
{{- if and (isset .Params "image") (hasPrefix (.Params.image) "/img") -}}
    {{- $image_url = (absURL .Params.image) -}}
{{ else if (.Resources.ByType "image").GetMatch (printf "%s" .Params.image) }}
    {{ $image_match := (.Resources.ByType "image").GetMatch (.Params.image) }}
    {{ with $image_match }}
        {{ $image_url = $image_match.Permalink }}
    {{ end }}
{{- else -}}
    {{- $image_url = (absURL "/about/images/vaujany.jpg" ) -}}
{{ end -}}
<meta property='og:image' content='{{ $image_url }}'/>
{{- if eq .Section "blog" }}
{{- $date := .Date.Format "2006-02-01" }}
<meta property = 'article:published_time' content = '{{ htmlUnescape $date }}' />
<meta name = 'twitter:card' content = 'summary_large_image' />
<meta name = 'twitter:creator' content = '{{ or (.Params.author) (.Site.Author.name) }}'>
<meta name = 'twitter:title' content = '{{ .Title }}' />
<meta property = 'twitter:description'  content = "{{ if .IsHome }}{{ $params.description }}{{ else }}{{ .Description }}{{ end -}}"/>
<meta name = 'twitter:image' content = '{{ $image_url }}' />
{{- end }}